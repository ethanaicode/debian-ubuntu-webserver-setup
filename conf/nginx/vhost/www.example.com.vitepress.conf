server {
    listen 80;
    listen 443 ssl http2;
    server_name example.com www.example.com;
    
    # VitePress build output directory (adjust path as needed)
    # Default VitePress output: .vitepress/dist
    root /www/wwwroot/www.example.com/dist;
    index index.html;

    # Character set
    charset utf-8;

    ssl_certificate    /etc/letsencrypt/live/www.example.com/fullchain.pem;
    ssl_certificate_key    /etc/letsencrypt/live/www.example.com/privkey.pem;
    
    # VitePress rewrite rules (SPA routing)
    include rewrite-vitepress.conf;

    # Enable Gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_comp_level 6;
    gzip_types text/plain text/css text/xml text/javascript 
               application/json application/javascript application/xml+rss 
               application/rss+xml font/truetype font/opentype 
               application/vnd.ms-fontobject image/svg+xml;
    gzip_disable "msie6";

    # Enable Brotli compression (if module available)
    # brotli on;
    # brotli_comp_level 6;
    # brotli_types text/plain text/css text/xml text/javascript 
    #              application/json application/javascript application/xml+rss 
    #              application/rss+xml font/truetype font/opentype 
    #              application/vnd.ms-fontobject image/svg+xml;

    # Custom 404 page (VitePress generates 404.html)
    error_page 404 /404.html;

    # Define access and error logs
    access_log  /www/wwwlogs/www.example.com.log;
    error_log  /www/wwwlogs/www.example.com.error.log;
}
